# IPv6全局单播地址详解

## 1. 基本定义
全局单播地址（Global Unicast Address）是IPv6中可在全球互联网上进行路由和访问的地址。这类似于IPv4中的公网地址。

## 2. 地址范围
- **前缀**：`2000::/3`
- **起始地址**：`2000:0000:0000:0000:0000:0000:0000:0000`（简写：`2000::`）
- **结束地址**：`3fff:ffff:ffff:ffff:ffff:ffff:ffff:ffff`

### 2.1 范围原理
- 前3位固定为`001`（二进制）
- `2xxx:`开头：因为二进制`0010`
- `3xxx:`开头：因为二进制`0011`
- 这就是为什么范围覆盖了所有以2和3开头的地址

## 3. 地址结构
```
|         |                 |          |                    |
| 3 bits  |     45 bits    |  16 bits |      64 bits      |
|---------|-----------------|----------|-------------------|
|   001   | 全局路由前缀    |  子网ID  |     接口ID        |
|         |                 |          |                    |
```

### 3.1 各字段说明
1. **前3位**：
   - 固定为`001`
   - 标识这是一个全局单播地址

2. **全局路由前缀**（45位）：
   - 由互联网注册机构分配
   - 用于全球路由

3. **子网ID**（16位）：
   - 由组织自行分配
   - 用于内部子网划分
   - 可创建65,536个子网

4. **接口ID**（64位）：
   - 通常使用EUI-64或随机生成
   - 在子网内标识具体接口

## 4. 特殊分配范围
1. **`2001::/16`**：
   - IANA特殊用途保留
   - 包含多个特殊用途子范围

2. **`2001:db8::/32`**：
   - 文档和示例专用
   - 不会在实际网络中使用

3. **`2002::/16`**：
   - 曾用于6to4转换机制
   - 现已废弃不建议使用

## 5. 分配层次
```
IANA（互联网数字分配机构）
         ↓
RIR（地区互联网注册机构）
         ↓
ISP（互联网服务提供商）
         ↓
最终用户（组织/企业）
```

### 5.1 各层次职责
1. **IANA**：
   - 管理全球IPv6地址空间
   - 向RIR分配大块地址段

2. **RIR**：
   - 负责特定地理区域
   - 向ISP分配地址块
   - 例如：APNIC（亚太）、ARIN（北美）

3. **ISP**：
   - 向客户分配地址段
   - 通常分配/48或/56前缀

4. **最终用户**：
   - 使用分配的前缀
   - 进行内部子网划分

## 6. 最佳实践
1. **地址规划**：
   - 建议使用/48前缀用于组织
   - 保留足够的子网空间
   - 考虑未来扩展需求

2. **子网划分**：
   - 使用16位子网ID进行划分
   - 可以基于地理、部门或功能
   - 保持编号方案的一致性

3. **接口ID分配**：
   - 可使用EUI-64自动生成
   - 也可手动分配
   - 注意避免使用易猜测的值

## 7. 安全考虑
1. **地址扫描防护**：
   - 使用随机接口ID
   - 避免使用连续或易猜测的地址

2. **路由安全**：
   - 实施入站和出站过滤
   - 防止伪造的全局单播地址

3. **地址管理**：
   - 保持地址分配记录
   - 定期审计地址使用情况
